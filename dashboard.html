<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>لوحة التحكم - حسابي</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family:"Cairo", sans-serif; background: linear-gradient(135deg, #74ABE2, #5563DE); margin:0; padding:0; display:flex; justify-content:center; align-items:center; min-height:100vh; }
    .dashboard { background:#fff; padding:30px; border-radius:15px; width:100%; max-width:500px; box-shadow:0 10px 25px rgba(0,0,0,0.15); text-align:center; }
    h2 { margin-bottom:20px; }
    .info { text-align:right; margin:15px 0; padding:10px; border-bottom:1px solid #eee; }
    .balance { font-size:22px; font-weight:bold; margin:20px 0; color:#333; }
    .btn { display:block; width:100%; padding:12px; margin:10px 0; border:none; border-radius:8px; font-size:16px; cursor:pointer; }
    .deposit { background:#28a745; color:#fff; }
    .deposit:hover { background:#218838; }
    .withdraw { background:#dc3545; color:#fff; }
    .withdraw:hover { background:#c82333; }
    .logout { background:#6c757d; color:#fff; }
    .logout:hover { background:#5a6268; }
  </style>
</head>
<body>
  <div class="dashboard">
    <h2>مرحبا بك 👋</h2>
    <div class="info"><strong>الاسم:</strong> <span id="userName"></span></div>
    <div class="info"><strong>البريد الإلكتروني:</strong> <span id="userEmail"></span></div>
    <div class="info"><strong>رقم الهاتف:</strong> <span id="userPhone"></span></div>
    <div class="balance">الرصيد الحالي: <span id="balance">0</span> $</div>
    <button class="btn deposit" onclick="deposit()">إيداع</button>
    <button class="btn withdraw" onclick="withdraw()">سحب</button>
    <button class="btn logout" onclick="logout()">تسجيل الخروج</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCFYr3mTYs3BFvtnIcuFEjkSfJV3kPrzXk",
      authDomain: "ads-company-2e012.firebaseapp.com",
      projectId: "ads-company-2e012",
      storageBucket: "ads-company-2e012.appspot.com",
      messagingSenderId: "706203585878",
      appId: "1:706203585878:web:98c58764c1c7f95f1e5af7",
      measurementId: "G-BKSKHM3Z2S"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const userName = document.getElementById("userName");
    const userEmail = document.getElementById("userEmail");
    const userPhone = document.getElementById("userPhone");
    const balance = document.getElementById("balance");

    // ✅ جلب بيانات المستخدم بعد تسجيل الدخول
    onAuthStateChanged(auth, (user) => {
      if (user) {
        userName.textContent = user.displayName || "مستخدم";
        userEmail.textContent = user.email;
        userPhone.textContent = user.phoneNumber || "—";
        balance.textContent = "100"; // مؤقت: خليت الرصيد 100$ كاختبار
      } else {
        window.location.href = "login.html";
      }
    });

    // أزرار الإيداع والسحب (مؤقتة)
    window.deposit = () => {
      alert("لإيداع الأموال، الرجاء التحويل إلى محفظة USDT الخاصة بالشركة.");
    };

    window.withdraw = () => {
      alert("لطلب سحب، الرجاء إدخال عنوان محفظتك USDT وسنحول لك المبلغ.");
    };

    window.logout = () => {
      signOut(auth).then(() => {
        window.location.href = "login.html";
      });
    };
  </script>
</body>
</html>
